@import url("/syntax-dark.css") screen and (prefers-color-scheme: dark);
@import url("/syntax-light.css") print, (prefers-color-scheme: light);
@import url('https://fonts.googleapis.com/css2?family=Atkinson+Hyperlegible+Mono:ital,wght@0,200..800;1,200..800&family=Atkinson+Hyperlegible+Next:ital,wght@0,200..800;1,200..800');

:root {
	--lm-color-bg: #ffefef;
	--lm-color-bg: oklch(from var(--color-primary) .99 calc(c * .1) h);
	--lm-color-fg: #000;
	--dm-color-bg: oklch(from var(--color-primary) calc(l * .2) calc(c * .2) h);
	--dm-color-fg: #fff;
	--lm-bg: linear-gradient(to right, oklch(from var(--color-primary) .97 calc(c * .2) h), oklch(from var(--color-primary) .99 calc(c * .1) h) 300px);
	--dm-bg: linear-gradient(to right, oklch(from var(--color-primary) calc(l * .3) calc(c * .3) h), oklch(from var(--color-primary) calc(l * .2) calc(c * .2) h) 300px);

	--color-bg: var(--lm-color-bg);
	--color-fg: var(--lm-color-fg);
	--bg: var(--lm-color-bg);
	--bg: var(--lm-bg);
	--color-primary: #f30; /*#fa7;*/
	--color-pop: oklch(from var(--color-primary) calc(l + .1) calc(c + .1) calc(h - 180));
	--color-primary-sat: oklch(from var(--color-primary) calc(.95) calc(c + .1) h);

	--text-width: 80ch;
	--typeface-body: "Atkinson Hyperlegible Next", sans-serif;
	--typeface-display: "Atkinson Hyperlegible Next", sans-serif;
	--typeface-mono: "Atkinson Hyperlegible Mono", monospace;
	box-sizing: border-box;
	
	@media (prefers-color-scheme: dark) {
		--color-bg: var(--dm-color-bg);
		--color-fg: var(--dm-color-fg);
		--bg: var(--dm-bg);
	}
}



*, *:before, *:after{
	box-sizing: inherit;
}

body {
	background: var(--color-bg);
	background: var(--bg);
	color: var(--color-fg);

	padding: 0;
	margin: 0;
	font: 350 1em/1.5 var(--typeface-body);

	display: flex;
	flex-direction: column;

	&:has(nav#toc) {
		display: grid;
		grid-template-columns: minmax(250px,1fr) minmax(150px,5fr);
		grid-template-rows: auto minmax(100vh,auto) auto;
		grid-template-areas: "header header" "sidebar main" "footer footer";
		& section.content {
			padding: 0 3ch;
		}
	}

}

header {
	grid-area: header;
	border-bottom: 2px solid var(--color-primary);
	width: 100%;
	margin: 0;
	padding: 0.5em 1ch;
	color: #fff;
	font-weight: 450;
	font-size: clamp(1em, 1.2vw, 1.3em);
	//background: linear-gradient(to right in oklch, #20140e, #3c3638);
	background: linear-gradient(184deg in oklch, var(--color-primary) -100%, #000 200%);
	display: flex;
	flex-direction: column;
}

nav#topnav {
	display: flex;
	flex-direction: row;
	flex-wrap: wrap;
	gap: 5px;
	&>a:first-child {
		flex: 0 0;
		padding: 0.2em 0.6ch;
		font: 400 2em/1 var(--typeface-body);
		background: linear-gradient(to right, var(--color-pop), var(--color-pop) 0.1em, transparent 0.1em) 0 / 105% 105%, linear-gradient(to bottom in oklch, #fff1, #fff2 50%, #0002 50%, transparent) color-mix(in oklch, var(--color-primary-sat) 20%, transparent);
	}
	& ul {
		overflow: hidden;
		display: flex;
		flex-direction: row;
		flex-wrap: wrap;
		padding: 0;
		margin: 0;
		gap: 5px;
		list-style-type: none;
		flex: 1 1;
		padding-right: max(0px, calc(100vw - 1400px));
	}
	& li {
		display: flex;
		flex: 1 1;
		margin: 0;
		padding: 0;
	}
	& a {
		display: flex;
		place-items: center;
		place-content: center;
		flex: 1 0;
		min-width: max-content;
		border: 1px solid #fff8;
		outline: 1px solid #0008;
		//backdrop-filter: saturate(1.5) brightness(1.2);
		background: linear-gradient(to bottom in oklch, #fff1, #fff2 50%, #0002 50%, transparent) color-mix(in oklch, var(--color-primary-sat) 20%, transparent);
		padding: 0.25em 1.2ch 0.25em 1ch;
		text-decoration: none;
		text-shadow: 1px 1px 0 #000;
	}
}

nav#breadcrumbs{
	display: none;
}

nav#toc {
	grid-area: sidebar;
	padding: 0 2ch;
	position: sticky;
	top: 0;
	height: fit-content;
	& h2 {
		padding: 0 0 10px;
		margin: 20px 0 10px;
		border-bottom: 2px solid color-mix(in oklch, var(--color-fg) 60%, transparent);
		flex: 1 0;
	}
	& ol {
		padding: 0 0 0 3ch;
		list-style-type: decimal-leading-zero;
		& ol {
			list-style-type: lower-alpha;
			padding: 0 0 0 1.5ch;
		}
	}
	& li:has(.toplink) {
		text-align: right;
		margin-top: 1em;
		list-style-type: none;
	}
	& details summary {
		display: flex;
		flex-direction: column;
		position: relative;
	}
}

section.content {
	grid-area: main;
	padding: 0 5vw;
	min-height: 100vh;
	& p, & li, & blockquote {
		max-width: var(--text-width);
	}
	& img {
		max-width: 100%;
		height: auto;
	}
}

footer {
	--c: oklch(from var(--color-primary) max(l,0.85) c h);
	--c70: color-mix(in oklch, var(--c) 70%, #0000);
	--c10: color-mix(in oklch, var(--c) 10%, #0000);
	grid-area: footer;
	padding: 1em 3ch;
	background: repeating-linear-gradient(#0000, #000 3px, var(--c10) 4px, var(--c10) 5px, #0000 6px) #000;
	margin-top: 1em;
	font: 400 1.5em/1.3 var(--typeface-mono);
	text-shadow: 0 0 0.5em var(--c70);
	color: var(--c);
	padding-bottom: 100px;
	position: relative;
	box-shadow: 2px 2px 30px #000 inset, 2px 2px 30px #000 inset;
	border-top: 2px solid var(--color-pop);
	& :link, & :visited {
		background: var(--c);
		color: #000b;
		text-decoration: none;
		text-shadow: 0 0 3px #0005;
		&:hover, &:active {
			text-decoration: underline;
			background: inherit;
			color: inherit;
			box-shadow: none;
		}
	}
	& p, & li, & pre {
		max-width: var(--text-width);
		filter: drop-shadow(0 0 0.5em var(--c70));
	}
	& pre{
		border: 0;
		padding: 0;
		margin: 0;
		background: 0;
		color: inherit;
		font-size: 16px;
	}
}

@media screen and (max-width: 700px) {
	body:has(nav#toc) {
		display: flex;
	}
	nav#topnav {
		justify-content: center;
		&>a:first-child, & ul {
			flex: 1 1 350px;
		}
	}
	nav#toc {
		position: static;
		& details summary {
			&:after {
				content: 'Show ▶';
				position: absolute;
				right: 0.5ch;
				bottom: 0.7em;
				padding: 0 1ch;
				color: #fff;
				border: 1px solid color-mix(in oklch, var(--color-primary), #000 10%);
				outline: 1px solid #777a;
				background: linear-gradient(to bottom in oklch, #fff2, #fff3 50%, #0002 50%, transparent) color-mix(in oklch, var(--color-primary-sat), #000 50%);
				&:last-character {
					font-size: 0.8em;
				}
			}
			[open] &:after {
				content: 'Hide ▲';
			}
		}
		& ol {
			margin-bottom: 0;
		}
		& li:has(.toplink) {
			display: none;
		}
		h2 {
			margin-bottom: 0;
		}
	}
	h1 {
		font-size: 3em !important;
	}
	footer {
		font-size: 14px !important;
		& pre {
			font-size: 14px;
		}
	}
}

:link, :visited {
	color: inherit;
	text-decoration: 1px underline var(--color-primary);
	font-weight: 400;
}

h1 {
	font: 300 4em/1 var(--typeface-display);
	font-size: clamp(3em, 5vw, 6em);
	//text-decoration: 2px underline color-mix(in oklch, var(--color-pop) 20%, transparent);
	color: color-mix(in oklch, var(--color-primary) 60%, var(--color-fg));
	max-width: 22ch;
	margin: 0.5em 0 0.25em;
	//text-decoration: 2px underline color-mix(in oklch, var(--color-fg) 50%, var(--color-primary));
}

h2 {
	font: 500 clamp(1.4em, 2.5vw, 1.8em)/1.2 var(--typeface-display);
	margin: 1em 0 0.25em;
}

h3 {
	font: 500 1.1em/1.2 var(--typeface-body);
	text-transform: uppercase;
	margin: 1em 0 0.25em;
	text-decoration: 1px underline color-mix(in oklch, var(--color-pop) 50%, var(--color-fg));
	text-underline-offset: 4px;
}

code, pre {
	font: 400 0.9em/1.2 var(--typeface-mono);
}

.zola-anchor {
	position: absolute;
	left: -1.2ch;
	opacity: 0;
	color: var(--color-primary);
	text-decoration: none;
	padding-right: 10px;
	:hover > &, &:hover, &:focus, &:active{
		opacity: 1;
	}
	:has(>&) {
		position: relative;
	}
}

blockquote {
	background: linear-gradient(to bottom right, color-mix(in oklch,var(--color-primary) 10%, transparent), transparent 300%);
	padding: .5em 2ch;
	margin: 1em 0;
	border-left: 2px solid var(--color-primary);
	max-width: var(--text-width);
}

p.author {
	text-align: right;
}

.article-signoff {
	text-align: right;
}

pre {
	padding: 1ch;
	overflow-x: auto;
	max-width: fit-content;
}

ol {
	padding-left: 3ch;
	& li {
		padding-left: 0.5ch;
		&::marker {
			font-weight: 400;
			margin: .2em 0;
		}
	}
}

ul {
	padding-left: 3.25ch;
	& li {
		padding-left: 0.25ch;
		margin: .2em 0;
	}
	&.blog-listing {
		padding: 0;
		margin: 1em 0;
	}
	&.blog-listing li {
		display: flex;
		flex-direction: row;
		flex-wrap: wrap-reverse;
		justify-content: space-between;
		border-bottom: 1px solid var(--color-primary);
		margin: 0.5em 0;
		align-items: end;
		//align-items: center;
		& :link, & :visited {
			flex: 1 0 80%;
			text-decoration: none;
		}
		& .article-separator {
			display: none
		}
		& time {
			font-family: var(--typeface-mono);
			min-width: max-content;
			font-size: 0.8em;
			line-height: 1;
		}
	}
}

@media print {
	:root {
		--color-bg: #fff;
		--color-fg: #000;
		--bg: #fff;
	}
	body:has(nav#toc) {
		display: flex;
	}
	nav#toc {
		display: none;
	}
	header {
		visibility: hidden;
	}
	header ul {
		display: none !important;
	}
	nav#topnav>a:first-child {
		visibility: visible;
		background: none;
		color: #000;
		text-shadow: none;
	}
	footer {
		font-size: 10pt !important;
		box-shadow: none;
		border-top: 1px solid #000;
		color: #000;
		background: none;
		text-shadow: none;
		& :link, & :visited {
			background: none;
			text-shadow: none;
			color: #000;
			text-decoration: underline;
		}
	}
}